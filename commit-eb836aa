From eb836aa336a03f866d42a16866eeb2cd9def02b4 Mon Sep 17 00:00:00 2001
From: luizpsg <luiz.saud@sga.pucminas.br>
Date: Wed, 17 Apr 2024 19:57:06 -0300
Subject: Fix EntityNotFoundException handling in UserService update method


diff --git a/course/src/main/java/com/luiz/course/services/UserService.java b/course/src/main/java/com/luiz/course/services/UserService.java
index df09b2d..5a8c938 100644
--- a/course/src/main/java/com/luiz/course/services/UserService.java
+++ b/course/src/main/java/com/luiz/course/services/UserService.java
@@ -12,6 +12,8 @@ import com.luiz.course.repositories.UserRepository;
 import com.luiz.course.services.exceptions.DatabaseException;
 import com.luiz.course.services.exceptions.ResourceNotFoundException;
 
+import jakarta.persistence.EntityNotFoundException;
+
 @Service
 public class UserService {
 
@@ -44,9 +46,13 @@ public class UserService {
 }
 
   public User update(Long id, User obj) {
-    User entity = repository.getReferenceById(id);
-    updateData(entity, obj);
-    return repository.save(entity);
+    try{  
+      User entity = repository.getReferenceById(id);
+      updateData(entity, obj);
+      return repository.save(entity);
+    } catch (EntityNotFoundException e) {
+      throw new ResourceNotFoundException(id);
+    }
   }
 
   private void updateData(User entity, User obj) {
